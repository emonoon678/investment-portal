<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>ุชูุงุตูู ุงููุฑุตุฉ</title>
  <link rel="stylesheet" href="style.css" />
  <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;500;700&display=swap" rel="stylesheet">

</head>
<body>

  <header class="top-header">
    <div class="header-logos">
      <img src="images/logo-left.png" alt="ุดุนุงุฑ ุงููุฒุงุฑุฉ" />
      <h1>ุงููุฑุต ุงูุงุณุชุซูุงุฑูุฉ โ ุฃูุงูุฉ ุงูุฃุญุณุงุก</h1>
      <img src="images/logo-right.png" alt="ุดุนุงุฑ ุงูุฃูุงูุฉ" />
    </div>
  </header>

  <main class="details-container" id="detailsContainer">
    <!-- ุชูุงุตูู ุงููุฑุตุฉ ุณุชูุนุฑุถ ููุง -->
  </main>

  <footer class="footer">
    <p>
      ุชู ุงูุชุทููุฑ ุจูุงุณุทุฉ
      <a href="https://mazeej.com.sa/" target="_blank">ูุฒูุฌ</a>
      ยฉ 2025
    </p>
  </footer>

<script src="data.js"></script>
<script>
  const params = new URLSearchParams(window.location.search);
  const id = Number(params.get("id")); // ุชุญููู ุฅูู ุฑูู

  const container = document.getElementById("detailsContainer");
  const item = opportunities.find(o => o.id === id); // ุชุทุงุจู ุตุญูุญ

  if (!item) {
    container.innerHTML = "<p style='text-align:center; color:red'>ูู ูุชู ุงูุนุซูุฑ ุนูู ุงููุฑุตุฉ ุงููุทููุจุฉ.</p>";
  } else {
    const deadline = new Date(item.lastDate).getTime();
    const now = new Date().getTime();
    const diff = deadline - now;

    let countdown = "";
    if (diff > 0) {
      const days = Math.floor(diff / (1000 * 60 * 60 * 24));
      const hours = Math.floor((diff / (1000 * 60 * 60)) % 24);
      const minutes = Math.floor((diff / (1000 * 60)) % 60);
      countdown = `<p class="countdown">โณ ูุชุจูู: ${days} ููู / ${hours} ุณุงุนุฉ / ${minutes} ุฏูููุฉ</p>`;
    } else {
      countdown = `<p class="expired">โ ุงูุชูู ุงูุชูุฏูู</p>`;
    }

    container.innerHTML = `
      <div class="opportunity-card">
        <div class="card-header ${item.status === "ูุชุงุญุฉ" ? "active" : "ended"}">๐ ุงูุญุงูุฉ: ${item.status}</div>
        <h3>${item.name}</h3>
        <p>๐ท๏ธ <strong>ุงููุทุงุน:</strong> ${item.type}</p>
        <p>๐ <strong>ุงููููุน:</strong> ${item.location}</p>
        <p>๐ <strong>ุงููุณุงุญุฉ:</strong> ${item.area}</p>
        <p>โฑ <strong>ูุฏุฉ ุงูุนูุฏ:</strong> ${item.duration}</p>
        <p>๐ <strong>ุขุฎุฑ ููุนุฏ:</strong> ${new Date(item.lastDate).toLocaleDateString("ar-EG")}</p>
        ${countdown}
        <div class="buttons" style="margin-top:1rem">
          <a class="details" href="https://balady.gov.sa" target="_blank">ููุตุฉ ูุฑุต</a>
          <a class="map" href="${item.map}" target="_blank">ุนุฑุถ ุงูุฎุฑูุทุฉ</a>
        </div>
      </div>
    `;
  }
</script>

</body>
</html>
